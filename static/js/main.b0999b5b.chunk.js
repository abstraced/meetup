(this.webpackJsonpmeetup=this.webpackJsonpmeetup||[]).push([[0],{21:function(e,t,n){e.exports=n(46)},26:function(e,t,n){},27:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(19),c=n.n(r),o=(n(26),n(2)),i=n(6),l=n(4),u=n(3),p=n(5),h=(n(27),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={showDetails:!1},n.toggleDetails=function(e){n.setState({showDetails:!n.state.showDetails})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Event"},s.a.createElement("div",{className:"date"},"Date: ",this.props.event.local_date,"  ",this.props.event.local_time),s.a.createElement("div",{className:"what"},"What: ",this.props.event.name),s.a.createElement("div",{className:"who"}," Who:",this.props.event.group?this.props.event.group.who:"Unknown"),s.a.createElement("div",{className:"attending"},"Attending: ",this.props.event.yes_rsvp_count),this.state.showDetails?s.a.createElement("div",{className:"extra_infos"},s.a.createElement("div",{className:"address"}," Address:",this.props.event.venue?this.props.event.venue.address_1+", "+this.props.event.venue.city+", "+this.props.event.venue.localized_country_name:"Unknown"),s.a.createElement("div",{className:"description"},"Description: ",this.props.event.description),s.a.createElement("div",{className:"type_of_event"},"Type of event: ",this.props.event.visibility),s.a.createElement("div",{className:"link"}," Link:  ",this.props.event.link," "),s.a.createElement("button",{className:"toggleInfos",onClick:function(){return e.toggleDetails()}}," Less details ")):s.a.createElement("button",{className:"toggleInfos",onClick:function(){return e.toggleDetails()}}," More details "))}}]),t}(a.Component)),v=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{className:"EventList"},this.props.events.map((function(e){return s.a.createElement("li",{key:e.id},s.a.createElement(h,{event:e}))})))}}]),t}(a.Component),m=n(7),f=n.n(m),d=n(8),g=n.n(d);function b(){var e=localStorage.getItem("access_token");if(!e){var t=new URLSearchParams(window.location.search).get("code");return t?y("get",t):(window.location.href="https://secure.meetup.com/oauth2/authorize?client_id=230kg5vud5f4ukl907980hdqj4&response_type=code&redirect_uri=http://abstraced.github.io/meetup",null)}var n=localStorage.getItem("last_saved_time");return e&&Date.now()-n<36e5?e:y("renew",localStorage.getItem("refresh_token"))}function y(e,t){var n,a;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return"get"===e?n="https://9c8wf1t6k9.execute-api.eu-central-1.amazonaws.com/dev/api/token/"+t:"renew"===e&&(n="https://9c8wf1t6k9.execute-api.eu-central-1.amazonaws.com/dev/api/refreshtoken/"+t),s.next=3,f.a.awrap(g.a.get(n));case 3:return a=s.sent,localStorage.setItem("access_token",a.data.access_token),localStorage.setItem("refresh_token",a.data.refresh_token),localStorage.setItem("last_saved_time",Date.now()),s.abrupt("return",a.data.access_token);case 8:case"end":return s.stop()}}))}function E(e,t,n){var a,s,r;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,f.a.awrap(b());case 2:if(!(a=c.sent)){c.next=12;break}return s="https://api.meetup.com/find/upcoming_events?&sign=true&photo-host=public&access_token="+a,e&&t&&(s+="&lat="+e+"&lon="+t),n&&(s+="&page="+n),e&&t&&n&&(s+="&lat="+e+"&lon="+t+"&page="+n),c.next=10,f.a.awrap(g.a.get(s));case 10:return r=c.sent,c.abrupt("return",r.data);case 12:case"end":return c.stop()}}))}var w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).color="blue",n}return Object(p.a)(t,e),t}(function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getStyle=function(){return{color:n.color}},n.color=null,n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Alert"},s.a.createElement("p",{style:this.getStyle()},this.props.text))}}]),t}(a.Component)),k=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={query:"",suggestions:[]},n.handleInputChanged=function(e){var t=e.target.value;n.setState({query:t}),function(e){var t,n,a;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,f.a.awrap(b());case 2:if(!(t=s.sent)){s.next=9;break}return n="https://api.meetup.com/find/locations?&sign=true&photo-host=public&query="+e+"&access_token="+t,s.next=7,f.a.awrap(g.a.get(n));case 7:return a=s.sent,s.abrupt("return",a.data);case 9:return s.abrupt("return",[]);case 10:case"end":return s.stop()}}))}(t).then((function(e){n.setState({suggestions:e}),t&&0===e.length?n.setState({infoText:"We can not find the city you are looking for. Please try another city"}):n.setState({infoText:""})}))},n.handleItemClicked=function(e,t,a){n.setState({query:e,suggestions:[]}),n.props.updateEvents(t,a)},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"CitySearch"},s.a.createElement(w,{text:this.state.infoText}),s.a.createElement("input",{placeholder:"city",onChange:this.handleInputChanged,value:this.state.query,type:"text",className:"city"}),s.a.createElement("ul",{className:"suggestions"},this.state.suggestions.map((function(t){return s.a.createElement("li",{onClick:function(){return e.handleItemClicked(t.name_string,t.lat,t.lon)},key:t.name_string},t.name_string)}))))}}]),t}(a.Component),O=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={numberOfEvents:32},n.handleInputChanged=function(e){var t=e.target.value;n.setState({numberOfEvents:t}),n.props.updateEvents(null,null,t),t<1?n.setState({infoText:"The value cannot be negative or 0"}):n.setState({infoText:""})},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"numberOfEvents"},s.a.createElement("label",null,"Number of Events: "),s.a.createElement("input",{type:"text",id:"numberOfEvents__input",value:this.state.numberOfEvents,onChange:this.handleInputChanged}),s.a.createElement(w,{text:this.state.infoText}))}}]),t}(a.Component),j=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={events:[],page:null,lat:null,lon:null},n.updateEvents=function(e,t,a){e&&t?E(e,t,n.state.page).then((function(a){return n.setState({events:a.events,lat:e,lon:t})})):a?E(n.state.lat,n.state.lon,a).then((function(e){return n.setState({events:e.events,page:a})})):E(n.state.lat,n.state.lon,n.state.page).then((function(e){return n.setState({events:e.events})}))},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){return e.setState({events:t.events})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(k,{updateEvents:this.updateEvents}),s.a.createElement(O,{updateEvents:this.updateEvents}),s.a.createElement(v,{events:this.state.events}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(20);c.a.render(s.a.createElement(j,null),document.getElementById("root")),_.config("adde2723cba74f219e6d43f78ac40f2e").install()}},[[21,1,2]]]);
//# sourceMappingURL=main.b0999b5b.chunk.js.map